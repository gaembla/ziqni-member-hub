{"version":3,"file":"js/759.c8f77a3d.js","mappings":"iUAmBA,IAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAcC,EAAAA,EAAAA,KAAI,oBAClBC,EAAS,mCACTC,EAAU,KAEVC,EAAiB,yCAAG,gGAOvB,OANKC,EAAqB,CACzBC,OAAQN,EAAYO,MACpBL,OAAQA,EACRM,eAAe,EACfL,QAASA,EACTM,SAAU,cACX,SAEsBC,MAAM,qCAAsC,CACjEC,OAAQ,OACRC,KAAMC,KAAKC,UAAUT,GACrBU,QAAS,CACPC,OAAQ,mBACR,eAAgB,sBAElB,OAPY,OAARC,EAAW,EAAH,cASKA,EAASC,OAAM,OAA5BN,EAAO,EAAH,KAENA,EAAKO,MAAQP,EAAKO,KAAKC,UACnBC,EAAQT,EAAKO,KAAKC,SACxBE,aAAaC,QAAQ,QAASF,GAC9BvB,EAAO0B,GAAG,IAEVC,QAAQC,MAAM,qBAAsBd,EAAKe,OAAO,GAAGC,SACpD,2CACF,kBA3BsB,mCA6BjBC,IAAeP,aAAaQ,QAAQ,S,OAEtCD,GACF/B,EAAOiC,KAAK,CAAEC,KAAM,c,gWCnDhBC,EAAc,EAEpB,G","sources":["webpack://ziqni-member-home/./src/views/pages/Login.vue","webpack://ziqni-member-home/./src/views/pages/Login.vue?30a0"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"login-form\">\n      <CFormInput\n        type=\"text\"\n        v-model=\"memberRefId\"\n      />\n      <button class=\"m-btn login-btn\" @click=\"generateUserToken\">\n        Log In\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { CFormInput } from '@coreui/vue';\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router'\n\nconst router = useRouter();\nconst memberRefId = ref('1092564679937416');\nconst apiKey = 'c771c80ca14d9a4263a8deead17ce083';\nconst expires = 36000;\n\nconst generateUserToken = async () => {\n  const memberTokenRequest = {\n    member: memberRefId.value,\n    apiKey: apiKey,\n    isReferenceId: true,\n    expires: expires,\n    resource: 'ziqni-gapi'\n  };\n\n  const response = await fetch('https://api.ziqni.com/member-token', {\n    method: 'post',\n    body: JSON.stringify(memberTokenRequest),\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    }\n  });\n\n  const body = await response.json();\n\n  if (body.data && body.data.jwtToken) {\n    const token = body.data.jwtToken;\n    localStorage.setItem('token', token);\n    router.go(0)\n  } else {\n    console.error('Member Token Error', body.errors[0].message);\n  }\n}\n\nconst isLoggedIn = !!localStorage.getItem('token');\n\nif (isLoggedIn) {\n  router.push({ name: 'Dashboard' });\n}\n</script>\n\n<style lang=\"scss\">\n.login-page {\n  position: relative;\n  width: 100vw;\n  height: 100vh;\n  background: #FAFAFE;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .login-form {\n    position: absolute;\n    top: 35%;\n  }\n\n  .login-btn {\n    margin-top: 25px;\n    width: 100%;\n  }\n}\n</style>","import script from \"./Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=d708c0b0&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["router","useRouter","memberRefId","ref","apiKey","expires","generateUserToken","memberTokenRequest","member","value","isReferenceId","resource","fetch","method","body","JSON","stringify","headers","Accept","response","json","data","jwtToken","token","localStorage","setItem","go","console","error","errors","message","isLoggedIn","getItem","push","name","__exports__"],"sourceRoot":""}